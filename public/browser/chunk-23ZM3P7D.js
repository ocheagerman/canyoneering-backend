import{c as ht}from"./chunk-FHKQQ2O7.js";import{a as et,b as it,c as nt,d as ot,e as _,f as rt,g as st,h as dt,i as at,j as pt,k as lt,l as ct,m as mt,n as ut}from"./chunk-LSW7M3RZ.js";import{d as L,h as q,j as O,n as z,o as K,p as J,t as X,v as Y,w as Z,z as tt}from"./chunk-FIOFHD3E.js";import{Aa as $,B as A,C as S,Fa as G,Ha as W,Ja as Q,K as a,L as v,Q as g,S as l,V as r,W as s,X as c,Y as F,Z as f,_ as k,a as b,b as x,ba as E,fa as d,ha as y,ka as T,la as B,na as V,q as w,r as C,t as U,ta as H,ua as D,va as j,w as N,x as P,ya as M,za as R}from"./chunk-KAVTFUTI.js";var ft=(()=>{let n=class n{constructor(t){this.http$=t,this.url="",this.endpoint="http://localhost:5000"}constructUrl(t){this.url=this.endpoint+t}get$(t){return this.constructUrl(t),this.http$.get(this.url)}};n.\u0275fac=function(e){return new(e||n)(U($))},n.\u0275prov=w({token:n,factory:n.\u0275fac,providedIn:"root"});let o=n;return o})();var yt=(o,n,p)=>({"bg-slate-400":o,"bg-theme-color":n,"cursor-fancy":p});function vt(o,n){if(o&1&&(r(0,"option",40),d(1),s()),o&2){let p=n.$implicit;E("value",p.description),a(),y(" ",p.description," ")}}function kt(o,n){if(o&1&&(r(0,"option",40),d(1),s()),o&2){let p=n.$implicit;E("value",p.description),a(),y(" ",p.description," ")}}function Ot(o,n){if(o&1&&(r(0,"p",41),d(1),s()),o&2){let p=k();a(),y(" ",p.addOnsError," ")}}function _t(o,n){o&1&&(r(0,"span",42),d(1," No Pick-up selected "),s())}function Ct(o,n){if(o&1){let p=F();r(0,"span",43),d(1),r(2,"app-close",44),f("click",function(){A(p);let e=k();return S(e.removePickUpBtnClicked(e.selectedPickUp))}),s()()}if(o&2){let p=k();a(),y(" ",p.selectedPickUp," ")}}function Pt(o,n){o&1&&(r(0,"span",42),d(1," No Add-ons selected "),s())}function At(o,n){if(o&1){let p=F();r(0,"span",45),d(1),r(2,"app-close",44),f("click",function(){let e=A(p).$implicit,i=k();return S(i.removeAddOnsBtnClicked(e))}),s()()}if(o&2){let p=n.$implicit;a(),y(" ",p.description," ")}}var gt=(()=>{let n=class n{constructor(t,e,i,h){this.store=t,this.httpService=e,this.router=i,this.route=h,this.pickup=[],this.addOns=[],this.addOnsPackageHistory=[],this.pickUpPackageHistory=[],this.productName="Kawasan Canyoneering",this.productPrice=999,this.selectedPickUp="",this.selectedAddOns=[],this.productQuantity=1,this.addOnsQuantity=1,this.addOnsError="",this.disablePickUpBtn=!0,this.disableAddOnBtn=!0,this.disableAddOnNumRange=!0,this.logo1="images/logo.png",this.logo2="images/logo2.png",this.pagePathParam="",this.pages=[{type:"image",display:this.logo2},{type:"text",display:"Home"},{type:"text",display:"Services"},{type:"text",display:"About Us"},{type:"text",display:"FAQs"},{type:"text",display:"Reviews"}];let m=this.router.snapshot.params.productName;this.pagePathParam=m,this.httpService.get$("/api/products/"+m).subscribe(u=>{console.log(u.pickup),this.pickup=[...u.pickup],this.addOns=[...u.addons]}),this.productForm=new ot({itemQuantity:new _(this.productQuantity,[]),pickup:new _(this.pickup[0]?.description||"",[]),addons:new _(this.addOns[0]?.description||"",[]),addonsQuantity:new _(this.addOnsQuantity,[])})}ngOnInit(){this.filterAddOn(),this.productForm.valueChanges.subscribe(function(t){}),this.productForm.controls.pickup.valueChanges.subscribe(t=>{this.disablePickUpBtn=t===this.pickup[0].description}),this.productForm.controls.addons.valueChanges.subscribe(t=>{this.tryToEnableAddOnsBtn()}),this.productForm.controls.itemQuantity.valueChanges.subscribe(t=>{let e=this.productForm.controls.addonsQuantity;this.productQuantity=t,e.value>this.productQuantity&&e.setValue(t)})}addToAddOnsHistory(t){let e=this.addOns.findIndex(i=>i.description===t.description);this.addOnsPackageHistory.push(x(b({},this.addOns[e]),{index:e}))}removeFromAddOnsHistory(t){this.addOnsPackageHistory=[...this.addOnsPackageHistory.filter(e=>e.description!==t)]}removeFromAddOnsOption(t){this.addOns=[...this.addOns.filter(e=>e.description!==t.description)]}addToAddOns(t){let e=this.addOnsPackageHistory.find(i=>i.description===t);this.addOns.push({description:e.description,price:e.price})}addToSelectedAddOns(t){this.selectedAddOns.push(t)}rmAddOnByIndex(t){this.selectedAddOns=[...this.selectedAddOns.filter(e=>e.index!==t.index)]}rmAddOnsByDesc(t){this.selectedAddOns=[...this.selectedAddOns.filter(e=>e.description!==t.description)]}setAddOnValueToDefault(){this.productForm.controls.addons.setValue(this.addOns[0].description)}filterAddOns(){let t={description:"Oslob Whale Shark - P800.00",price:800};this.addOns.find(e=>e.description===t.description)&&(this.addToAddOnsHistory(t),this.removeFromAddOnsOption(t),this.rmAddOnsByDesc(x(b({},t),{index:0})),this.productForm.controls.addons.value===t.description&&this.setAddOnValueToDefault())}removeFilterInAddOns(){let t="Oslob Whale Shark - P800.00";this.addOns.find(e=>e.description===t)||(this.addToAddOns(t),this.removeFromAddOnsHistory(t))}filterAddOn(){let t=this.pickup.find(e=>e.description===this.selectedPickUp);!t||t?.price===0?this.filterAddOns():this.removeFilterInAddOns()}addToPickUpHistory(t){let e=this.pickup.findIndex(i=>i.description===t);this.pickUpPackageHistory.push(x(b({},this.pickup[e]),{index:e}))}removeFromPickUp(t){this.pickup=[...this.pickup.filter(e=>e.description!==t)]}addToSelectedPickUp(t){this.selectedPickUp=t}removeFromSelectedPickUp(){this.selectedPickUp=""}setPickUpValueToDefault(){this.productForm.controls.pickup.setValue(this.pickup[0].description)}addToPickUp(t){let e=this.pickUpPackageHistory.find(i=>i.description===t);this.pickup.push({description:e.description,price:e.price})}removeFromPickUpHistory(t){this.pickUpPackageHistory=[...this.pickUpPackageHistory.filter(e=>e.description!==t)]}tryToEnableAddOnsBtn(){let t=this.productForm.controls.addons.value!==this.addOns[0].description;this.disableAddOnBtn=!t,this.disableAddOnNumRange=!t}pickupBtnClicked(){let t=this.productForm.controls.pickup.value;this.addToSelectedPickUp(t),this.filterAddOn()}removePickUpBtnClicked(t){this.addToPickUp(t),this.removeFromPickUpHistory(t),this.removeFromSelectedPickUp()}AddOnsBtnClicked(t){if(t>this.productQuantity){this.addOnsError=O.CLIENT01;return}let e=this.productForm.controls.addons.value,i=this.addOns.find(u=>u.description===e);if(!i){this.addOnsError=O.CLIENT02;return}if(this.selectedAddOns.filter(u=>u.description===i.description).length+t>this.productQuantity){this.addOnsError=O.CLIENT01;return}else this.addOnsError="";for(let u=0;u<t;u++)this.addToSelectedAddOns(x(b({},i),{index:u}))}removeAddOnsBtnClicked(t){this.rmAddOnByIndex(t)}decreaseItemQuantity(t){let e=this.productForm.controls.itemQuantity;e.value>1&&e.setValue(e.value-t)}increaseItemQuantity(t){let e=this.productForm.controls.itemQuantity;e.setValue(e.value+t)}decreaseAddOnsQuantity(t){let e=this.productForm.controls.addonsQuantity;e.value>1&&e.setValue(e.value-t)}increaseAddOnsQuantity(t){let e=this.productForm.controls.addonsQuantity,i=this.productForm.controls.itemQuantity;e.value<i.value&&e.setValue(e.value+t)}inDev(){let t={msg:O.DEV01,type:"info"};this.store.dispatch(q({current:t}))}goToCart(){this.route.navigateByUrl("/cart")}addToCartBtnIsClicked(){let t={msg:"item added to cart",addOns:this.selectedAddOns,pickup:this.selectedPickUp,productQuantity:this.productQuantity,productName:this.pagePathParam};this.store.dispatch(ht(t)),this.route.navigateByUrl("/cart")}};n.\u0275fac=function(e){return new(e||n)(v(L),v(ft),v(G),v(W))},n.\u0275cmp=N({type:n,selectors:[["app-productpage"]],decls:80,vars:32,consts:[[1,"relative","top-0","left-0","right-0","h-max","z-10","shadow-lg"],[1,"md:container","md:mx-auto","lg:max-w-screen-xl"],[1,"",3,"shouldBeWhite","logo","pages"],[1,"",3,"logo"],[1,"text-theme-color","text-2xl","font-bold","cursor-fancy",3,"click"],[1,"container","mx-auto","mt-24","max-w-6xl"],[1,"flex","flex-wrap","md:flex-nowrap","md:mx-12","justify-center","gap-4","mb-6"],[1,"w-full","grid","grid-rows-17","grid-cols-8","gap-2","mx-6","h-[520px]","sm:mx-16","md:h-[640px]","lg:h-[780px]","md:mx-0"],[1,"row-span-12","col-span-6","bg-slate-300","rounded-md","relative"],[1,"absolute","top-1/2","left-1/2","-translate-y-1/2","-translate-x-1/2","text-9xl","text-white","opacity-25"],[1,"row-span-4","col-span-2","bg-slate-400","rounded-md","relative"],[1,"absolute","top-1/2","left-1/2","-translate-y-1/2","-translate-x-1/2","text-3xl","text-white","opacity-25"],[1,"row-span-1","col-span-8","flex","items-end","relative"],[1,"text-lg","font-semibold","font-poetsen","text-slate-500","absolute"],[1,"w-full","py-12","px-2","mt-8","md:border","md:border-theme-color","md:mx-0","md:shadow-lg","md:rounded-md","md:mt-0"],[1,"w-5/6","mx-auto"],[1,"text-center","font-bold","text-3xl","font-poetsen"],[1,"font-semibold","font-poetsen","text-slate-400","mt-5"],["name","productForm",3,"formGroup"],[1,"mt-7"],["for","itemQuantity",1,"font-semibold","text-slate-400","font-poetsen","mr-5","mb-4"],["type","number","name","itemQuantity","id","itemQuantity","min","0","inputmode","numeric","formControlName","itemQuantity","hidden","",1,"font-light","text-slate-400","py-2","border","rounded-sm"],[1,"inline-block",3,"increase","decrease","value"],["for","pickup",1,"font-semibold","text-slate-400","font-poetsen","block","mb-4"],["name","pickup","id","pickup","formControlName","pickup",1,"font-light","text-slate-400","py-2","border","rounded-sm","mr-3","mb-4","w-60"],["class","font-light text-slate-400",3,"value",4,"ngFor","ngForOf"],["type","button",1,"rounded-3xl","text-white","text-xs","font-bold","py-1","px-8",3,"click","disabled","ngClass"],["for","addons",1,"font-semibold","text-slate-400","font-poetsen","block","mb-4"],["name","addons","id","addons","formControlName","addons",1,"font-light","text-slate-400","py-2","border","rounded-sm","block","mb-4","w-60"],["class","text-[11px] text-red-400 font-bold font-sans mt-2 mb-4",4,"ngIf"],["for","addons-quantity",1,"font-semibold","text-slate-400","font-poetsen","mr-5","mb-4"],["type","number","name","addons-quantity","id","addons-quantity","min","0","inputmode","numeric","formControlName","addonsQuantity","hidden","",1,"font-light","text-slate-400","py-2","border","rounded-sm","mr-5"],[1,"inline-block","mr-5","mb-4",3,"increase","decrease","value","disabled"],["type","button",1,"rounded-3xl","font-bold","text-white","text-xs","py-1","px-8",3,"click","disabled","ngClass"],[1,"font-semibold","text-slate-400","font-poetsen","mb-4"],["class","font-light",4,"ngIf"],["class","bg-slate-300 rounded-3xl py-1 pl-1 pr-6 text-[9px] font-extralight font-sans inline-block relative m-2",4,"ngIf"],["class","bg-slate-300 rounded-3xl py-1 pl-1 pr-6 text-[9px] font-extralight font-sans inline-block relative mr-1 mb-1",4,"ngFor","ngForOf"],[1,"mt-14"],["type","button",1,"font-bold","text-white","bg-","w-full","p-2","bg-theme-color","rounded-md",3,"click"],[1,"font-light","text-slate-400",3,"value"],[1,"text-[11px]","text-red-400","font-bold","font-sans","mt-2","mb-4"],[1,"font-light"],[1,"bg-slate-300","rounded-3xl","py-1","pl-1","pr-6","text-[9px]","font-extralight","font-sans","inline-block","relative","m-2"],[1,"absolute","right-2","top-1/2","-translate-y-1/2","font-extrabold","cursor-fancy",3,"click"],[1,"bg-slate-300","rounded-3xl","py-1","pl-1","pr-6","text-[9px]","font-extralight","font-sans","inline-block","relative","mr-1","mb-1"]],template:function(e,i){e&1&&(r(0,"header",0)(1,"nav",1),c(2,"app-desktop-nav",2),r(3,"app-mobile-nav",3)(4,"app-desktop-cart",4),f("click",function(){return i.goToCart()}),s()()()(),r(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),d(9," 1 "),c(10,"app-play-circle",9),s(),r(11,"div",10),d(12," 2 "),c(13,"app-play-circle",11),s(),r(14,"div",10),d(15," 3 "),c(16,"app-play-circle",11),s(),r(17,"div",10),d(18," 4 "),c(19,"app-play-circle",11),s(),r(20,"div",12)(21,"span",13),d(22," More Videos: "),s()(),r(23,"div",10),d(24," 5 "),c(25,"app-play-circle",11),s(),r(26,"div",10),d(27," 6 "),c(28,"app-play-circle",11),s(),r(29,"div",10),d(30," 7 "),c(31,"app-play-circle",11),s(),r(32,"div",10),d(33," 8 "),c(34,"app-play-circle",11),s()(),r(35,"div",14)(36,"div",15)(37,"h1",16),d(38),s(),r(39,"p",17),d(40),B(41,"currency"),s(),r(42,"form",18)(43,"div",19)(44,"label",20),d(45,"Quantity"),s(),c(46,"input",21),r(47,"app-number-range",22),f("increase",function(m){return i.increaseItemQuantity(m)})("decrease",function(m){return i.decreaseItemQuantity(m)}),s()(),r(48,"div",19)(49,"label",23),d(50," Pickup: "),s(),r(51,"select",24),g(52,vt,2,2,"option",25),s(),r(53,"button",26),f("click",function(){return i.pickupBtnClicked()}),d(54," ADD "),s()(),r(55,"div",19)(56,"label",27),d(57," Addons: "),s(),r(58,"select",28),g(59,kt,2,2,"option",25),s(),g(60,Ot,2,1,"p",29),r(61,"label",30),d(62," Quantity "),s(),c(63,"input",31),r(64,"app-number-range",32),f("increase",function(m){return i.increaseAddOnsQuantity(m)})("decrease",function(m){return i.decreaseAddOnsQuantity(m)}),s(),r(65,"button",33),f("click",function(){return i.AddOnsBtnClicked(i.productForm.controls.addonsQuantity.value)}),d(66," ADD "),s()(),r(67,"div",19)(68,"p",34),d(69," Selected Pickup: "),s(),g(70,_t,2,0,"span",35)(71,Ct,3,1,"span",36),s(),r(72,"div",19)(73,"p",34),d(74," Selected AddOns: "),s(),g(75,Pt,2,0,"span",35)(76,At,3,1,"span",37),s(),r(77,"div",38)(78,"button",39),f("click",function(){return i.addToCartBtnIsClicked()}),d(79," ADD TO CART "),s()()()()()()()),e&2&&(a(2),l("shouldBeWhite",!1)("logo",i.logo2)("pages",i.pages),a(),l("logo",i.logo1),a(35),y(" ",i.productName," "),a(2),y(" ",V(41,21,i.productPrice,"PHP")," / Person "),a(2),l("formGroup",i.productForm),a(5),l("value",i.productForm.controls.itemQuantity.value),a(5),l("ngForOf",i.pickup),a(),l("disabled",i.disablePickUpBtn)("ngClass",T(24,yt,i.disablePickUpBtn,!i.disablePickUpBtn,!i.disablePickUpBtn)),a(6),l("ngForOf",i.addOns),a(),l("ngIf",i.addOnsError),a(4),l("value",i.productForm.controls.addonsQuantity.value)("disabled",i.disableAddOnNumRange),a(),l("disabled",i.disableAddOnBtn)("ngClass",T(28,yt,i.disableAddOnBtn,!i.disableAddOnBtn,!i.disableAddOnBtn)),a(5),l("ngIf",!i.selectedPickUp),a(),l("ngIf",i.selectedPickUp),a(4),l("ngIf",!i.selectedAddOns.length),a(),l("ngForOf",i.selectedAddOns))},dependencies:[H,D,j,rt,lt,ct,et,st,pt,it,nt,mt,dt,at,z,J,K,X,Y,Z,M]});let o=n;return o})();var St=[{path:"",component:gt}],bt=(()=>{let n=class n{};n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=P({type:n}),n.\u0275inj=C({imports:[Q.forChild(St),Q]});let o=n;return o})();var te=(()=>{let n=class n{};n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=P({type:n}),n.\u0275inj=C({imports:[R,ut,tt,bt]});let o=n;return o})();export{te as ProductpageModule};
